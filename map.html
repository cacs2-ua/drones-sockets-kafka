<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map Display</title>
    <style>
        /* Add CSS here */

        body {
            background-color: #E6E6FA;
        }
            #mapContainer {
            display: flex;
            flex-direction: column;
            font-family: monospace;
            text-align: center;
        }

        .map-row {
            display: flex;
            margin-bottom: 20px;
        }

        .map-cell {
            width: 40px; /* Adjust width as needed */
            height: 20px; /* Adjust height as needed */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .row-number {
            margin-bottom: 20px; /* Extra space below the row number */
        }

        .header-row .map-cell {
            font-weight: bold;
        }

        .number-cell-red { /* Class for cells with numbers and false */
            color: red;
    }

        .number-cell-green { /* New class for cells with numbers */
            color: green; /* Set the text color to green */
    }
    </style>
</head>
<body>
    <div id="mapContainer">
        <!-- Map content will be populated here -->
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function fetchAndUpdateMap() {
                fetch('/mapa.json')
                    .then(response => response.json())
                    .then(data => renderMap(data.mapa))
                    .catch(error => console.error('Error:', error));
            }
    
            function renderMap(mapData) {
                const mapContainer = document.getElementById('mapContainer');
                let mapHTML = '<div class="map-row header-row">';
    
                // Header row for numbers 1 to 20
                mapHTML += '<div class="map-cell"></div>'; // Empty top-left corner
                for (let i = 1; i <= 20; i++) {
                    mapHTML += `<div class="map-cell">${i}</div>`;
                }
                mapHTML += '</div>'; // End of header row
    
                // Columns 1 to 20 (rotated view)
                for (let colIndex = 0; colIndex < 20; colIndex++) {
                    mapHTML += `<div class="map-row"><div class="map-cell">${colIndex + 1}</div>`;
                    for (let rowIndex = 0; rowIndex < 20; rowIndex++) {
                        const cell = mapData[rowIndex][colIndex];
                        const cellValue = cell[0] !== 0 ? ` ${cell[0]}` : '';
                        const cellClass = cell[0] !== 0
                            ? cell[1] ? 'map-cell number-cell-green' : 'map-cell number-cell-red'
                            : 'map-cell';
                        mapHTML += `<div class="${cellClass}">${cellValue}</div>`;
                    }
                    mapHTML += '</div>'; // End of column (now a row in the rotated map)
                }
    
                mapContainer.innerHTML = mapHTML;
            }
    
            fetchAndUpdateMap(); // Initial fetch and render
            setInterval(fetchAndUpdateMap, 500); // Update every 100 ms
        });
    </script>
    
    
</body>
</html>
